services:
  backend:
    build:
      context: .
      dockerfile: docker/Dockerfile
      target: backend-runtime
    env_file:
      - .env
    environment:
      GEMINI_MODEL: ${GEMINI_MODEL:-gemini-2.5-flash}
      CORS_ORIGIN: ${CORS_ORIGIN:-http://localhost:8081}
      PORT: ${PORT:-8080}
      PROJECTS_ROOT: /docker/shared
    ports:
      - "${PORT:-8080}:8080"
    volumes:
      - "${HOME}/projects:/docker/shared"
      - "./docker/backend:/docker/backend"
      - "./docker/backend/.gradle:/root/.gradle"
      - "./docker/backend/.cursor:/root/.cursor"
      - "./docker/backend/.claude:/root/.claude"
