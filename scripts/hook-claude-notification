#!/usr/bin/env bash
set -euo pipefail

payload="$(cat 2>/dev/null || true)"
log_file="${HOOKS_LOG_FILE:-/tmp/agent-hooks.log}"

{
  printf '[%s] claude-notification cwd=%s\n' "$(date -Iseconds)" "$(pwd)"
  if [ -n "${payload}" ]; then
    printf '%s\n' "${payload}"
  fi
} >> "${log_file}"

if command -v osascript >/dev/null 2>&1; then
  osascript -e 'display notification "Claude Code is waiting for your input" with title "Claude Code"'
fi
